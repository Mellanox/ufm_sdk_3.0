<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>UFM REST Plugin</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <style>
        .title {
            margin-right: 30px;
            font-size: 20px;
        }


        button {
            padding-left: 10px;
            padding-right: 10px;
        }

        .result {
            color: #c70e0e;
            font-weight: bold;
            padding-left: 10px;
        }



    </style>
</head>
<body>
<div class="welcome">
    <p class="title">Welcome to UFM Performance poc!</p>
    <div>
        <b>Ports:</b>
        <div>
            <p><b>Test</b> : Load Ports from UFM Directly</p>
            <button class="test-button"
                    data-auth="true"
                    data-api_url="../ufmRest/resources/ports">Run</button>
            Result:<span class="result"></span>
        </div>

        <div>
            <p><b>Test</b> : Load Ports from UFM as prepared ahead text - cached data</p>
            <button class="test-button" data-api_url="./ufm_cached_ports_as_text_prepared_ahead">Run</button>
            Result:<span class="result"></span>
        </div>
        <div>
            <p><b>Test</b> : Load Ports from UFM as prepared ahead compressed JSON - cached data</p>
            <button class="test-button" data-api_url="./ufm_cached_ports_as_text_compressed_wth_valid_header_type">Run</button>
            Result:<span class="result"></span>
        </div>
    </div>
    ------------------------------------------------
    <div>
        <b>Links:</b>
         <div>
            <p><b>Test</b> : Load Links from UFM Directly</p>
            <button class="test-button"
                    data-auth="true"
                    data-api_url="../ufmRest/resources/links">Run</button>
            Result:<span class="result"></span>
        </div>

        <div>
            <p><b>Test</b> : Load Links from UFM as prepared ahead text - cached data</p>
            <button class="test-button" data-api_url="./ufm_cached_links_as_text_prepared_ahead">Run</button>
            Result:<span class="result"></span>
        </div>
        <div>
            <p><b>Test</b> : Load Links from UFM as prepared ahead compressed JSON - cached data</p>
            <button class="test-button" data-api_url="./ufm_cached_links_as_text_compressed_wth_valid_header_type">Run</button>
            Result:<span class="result"></span>
        </div>
    </div>
    ------------------------------------------------
    <div>
        <b>Versioning:</b>
         <div>
            <p><b>Test</b> : Load Versioning from UFM Directly</p>
            <button class="test-button"
                    data-auth="true"
                    data-api_url="../ufmRest/app/versioning">Run</button>
            Result:<span class="result"></span>
        </div>

        <div>
            <p><b>Test</b> : Load Versioning from UFM as prepared ahead text - cached data</p>
            <button class="test-button" data-api_url="./ufm_cached_versioning_as_text_prepared_ahead">Run</button>
            Result:<span class="result"></span>
        </div>
        <div>
            <p><b>Test</b> : Load Versioning from UFM as prepared ahead compressed JSON - cached data</p>
            <button class="test-button" data-api_url="./ufm_cached_versioning_as_text_compressed_wth_valid_header_type">Run</button>
            Result:<span class="result"></span>
        </div>
    </div>
    ------------------------------------------------
    <div>
        <b>Default Session:</b>
        <div>
            <p><b>Test</b> : Load Default Session from UFM Directly</p>
            <button class="test-button"
                    data-auth="true"
                    data-api_url="../ufmRest/monitoring/session/0/data">Run</button>
            Result:<span class="result"></span>
        </div>

        <div>
            <p><b>Test</b> : Load Default Session from UFM as prepared ahead text - cached data</p>
            <button class="test-button" data-api_url="./ufm_cached_default_session_as_text_prepared_ahead">Run</button>
            Result:<span class="result"></span>
        </div>
        <div>
            <p><b>Test</b> : Load Default Session from UFM as prepared ahead compressed JSON - cached data</p>
            <button class="test-button" data-api_url="./ufm_cached_default_session_as_text_compressed_wth_valid_header_type">Run</button>
            Result:<span class="result"></span>
        </div>
    </div>
</div>

</body>
<script>


    $('.test-button').click(function () {
        var button = $(this);
        var startTime = (new Date()).getTime();
        var apiURL = button.data("api_url");
        var auth = button.data("auth")
        var result = button.parent().find('.result');
        button.prop("disabled", true);
        result.text("loading...");
        $.ajax({
            type: "GET",
            url: apiURL,
            beforeSend: function (xhr) {
                if(auth) {
                    xhr.setRequestHeader ("Authorization", "Basic " + btoa("admin" + ":" + "123456"));
                }
            },
            success: function (){
                button.prop("disabled", false);
                var endTime = (new Date()).getTime();
                var millisecondsLoading = endTime - startTime;
                result.text("Done in " + millisecondsLoading + " Milliseconds!");
            }
        })

    });



</script>
</html>