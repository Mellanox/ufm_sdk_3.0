import {Component, OnInit} from '@angular/core';
import {ITableInfo} from "../interfaces/table-info.interface";
import {UtilsService} from "../services/utils.service";

@Component({
  selector: 'app-general-route-module',
  templateUrl: './general-route-module.component.html',
  styleUrls: ['./general-route-module.component.scss']
})
export class GeneralRouteModuleComponent implements OnInit {


  /**
   * @VARIABLES
   */
  public componentInfo: ITableInfo = {
    "condition": "Redfish Health",
    "tab_name": "HGX GPU SXM DRAM Power",
    "path": "hgx_gpu_sxm_dram_power",
    "component_type": "table_and_graph",
    "api": {
      "path": "/api/redfish/health/hgx_gpu_sensors_histogram_info?sensor_group_name=HGX_GPU_SXM_DRAM_Power"
    }
  }
  public data;
  public isReady: boolean;
  public isReloading: boolean;
  public table_Data;


  constructor() {
  }

  ngOnInit(): void {
    this.loadData()
  }

  public loadData(fromManualRefresh = false): void {
    if (!fromManualRefresh) {
      this.isReady = false;
    }
    this.isReloading = true;
    setTimeout(()=>{
      this.data = {
        "raws_data": [
          [
            "BMC ID",
            "SXM 1 DRAM 0 Power 0 (W)",
            "SXM 2 DRAM 0 Power 0 (W)",
            "SXM 3 DRAM 0 Power 0 (W)",
            "SXM 4 DRAM 0 Power 0 (W)",
            "SXM 5 DRAM 0 Power 0 (W)",
            "SXM 6 DRAM 0 Power 0 (W)",
            "SXM 7 DRAM 0 Power 0 (W)",
            "SXM 8 DRAM 0 Power 0 (W)"
          ],
          [
            "10.141.137.163:55000",
            43,
            40,
            41,
            31,
            39,
            41,
            37,
            45
          ],
          [
            "10.141.137.163:55001",
            45,
            39,
            35,
            40,
            37,
            31,
            39,
            45
          ],
          [
            "10.141.137.163:55002",
            43,
            40,
            45,
            32,
            30,
            33,
            43,
            46
          ],
          [
            "10.141.137.163:55003",
            38,
            40,
            43,
            33,
            34,
            36,
            39,
            35
          ],
          [
            "10.141.137.163:55004",
            35,
            46,
            41,
            38,
            30,
            30,
            35,
            32
          ],
          [
            "10.141.137.163:55005",
            43,
            42,
            45,
            40,
            31,
            36,
            33,
            46
          ],
          [
            "10.141.137.164:55000",
            46,
            36,
            31,
            35,
            44,
            42,
            43,
            46
          ],
          [
            "10.141.137.164:55001",
            35,
            42,
            33,
            39,
            40,
            36,
            45,
            40
          ],
          [
            "10.141.137.164:55002",
            33,
            37,
            35,
            44,
            46,
            34,
            37,
            36
          ],
          [
            "10.141.137.164:55003",
            39,
            34,
            33,
            37,
            41,
            44,
            38,
            30
          ],
          [
            "10.141.137.164:55004",
            46,
            38,
            41,
            46,
            46,
            41,
            40,
            30
          ],
          [
            "10.141.137.164:55005",
            38,
            37,
            32,
            43,
            36,
            40,
            40,
            45
          ],
          [
            "10.141.215.5:55000",
            35,
            34,
            41,
            34,
            38,
            39,
            35,
            39
          ],
          [
            "10.141.215.5:55001",
            32,
            44,
            34,
            40,
            37,
            37,
            40,
            36
          ],
          [
            "10.141.215.5:55002",
            39,
            31,
            30,
            45,
            37,
            31,
            34,
            45
          ],
          [
            "10.141.215.5:55003",
            32,
            39,
            39,
            34,
            33,
            39,
            30,
            39
          ],
          [
            "10.141.215.5:55004",
            44,
            38,
            43,
            43,
            37,
            35,
            35,
            39
          ],
          [
            "10.141.215.5:55005",
            34,
            30,
            44,
            30,
            30,
            32,
            36,
            31
          ],
          [
            "10.141.215.6:55000",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.215.6:55001",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.215.6:55002",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.215.6:55003",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.215.6:55004",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.215.6:55005",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55000",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55001",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55002",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55003",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55004",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55005",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55006",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55007",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55008",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55009",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.141.24.10:55010",
            37,
            44,
            38,
            35,
            40,
            43,
            36,
            33
          ],
          [
            "10.235.4.6:55001",
            31,
            34,
            36,
            39,
            33,
            38,
            40,
            35
          ]
        ],
        "graph_data": {
          "histogram": {
            "data": [
              30,
              30,
              30,
              30,
              30,
              30,
              30,
              30,
              30,
              30,
              31,
              31,
              31,
              31,
              31,
              31,
              31,
              31,
              32,
              32,
              32,
              32,
              32,
              32,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              33,
              34,
              34,
              34,
              34,
              34,
              34,
              34,
              34,
              34,
              34,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              35,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              36,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              37,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              38,
              39,
              39,
              39,
              39,
              39,
              39,
              39,
              39,
              39,
              39,
              39,
              39,
              39,
              39,
              39,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              40,
              41,
              41,
              41,
              41,
              41,
              41,
              41,
              42,
              42,
              42,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              43,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              44,
              45,
              45,
              45,
              45,
              45,
              45,
              45,
              45,
              45,
              46,
              46,
              46,
              46,
              46,
              46,
              46,
              46,
              46
            ],
            "bins_count": 10,
            "filterable_columns": [
              "SXM 1 DRAM 0 Power 0 (W)",
              "SXM 2 DRAM 0 Power 0 (W)",
              "SXM 3 DRAM 0 Power 0 (W)",
              "SXM 4 DRAM 0 Power 0 (W)",
              "SXM 5 DRAM 0 Power 0 (W)",
              "SXM 6 DRAM 0 Power 0 (W)",
              "SXM 7 DRAM 0 Power 0 (W)",
              "SXM 8 DRAM 0 Power 0 (W)"
            ],
            "xlable": "DRAM_Power (Watt)",
            "ylable": "Number of GPUs",
            "graph_title": "HGX_GPU_SXM_DRAM_Power",
            "bar_color_range": {
              "normal": [
                -100,
                100000000
              ],
              "warning": [
                -100000,
                -1000
              ],
              "critical": [
                -1000000,
                -100001
              ]
            }
          }
        }
      };
      this.table_Data = Array.isArray(this.data['raws_data'][0])? UtilsService.parseListOfListData(this.data['raws_data']) : this.data['raws_data']
      this.isReady = true;
      this.isReloading = false;
    }, 1000)
  }

}
